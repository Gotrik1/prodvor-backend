# Работа с базой данных

Этот документ описывает основы работы с базой данных в проекте.

## 1. Технологии

- **СУБД:** PostgreSQL
- **Окружение:** Запускается в Docker-контейнере, как определено в `docker-compose.yml`.
- **ORM:** SQLAlchemy с использованием Flask-SQLAlchemy.
- **Миграции:** Alembic, интегрированный через Flask-Migrate.

## 2. Модели данных

Все SQLAlchemy модели, определяющие структуру таблиц, находятся в файле:

`app/models.py`

Этот файл является единственным источником правды о структуре данных приложения.

## 3. Миграции базы данных

Для изменения схемы базы данных (создание таблиц, добавление колонок и т.д.) используются миграции Alembic.

### Применение миграций

Чтобы применить все существующие миграции и привести схему БД в актуальное состояние, используйте специальный скрипт.

**Важно:** Перед запуском убедитесь, что ваше виртуальное окружение активировано (`source .venv/bin/activate`).

```bash
./run_migrations.sh
```

### Создание новой миграции

1.  Внесите изменения в модели в файле `app/models.py`.
2.  Запустите команду для автоматического создания файла миграции:
    ```bash
    flask db migrate -m "Краткое описание изменений"
    ```
3.  Примените новую миграцию, как описано выше.
